### 多金融产品序列

- 需要动态调整权重，抑或需要处理不定期的分红或利息。而这些需要进行动态地处理，因为其改变了时间序列的特征，否则将带来结构性断裂。

- **ETF Trick**：将一篮子证券视为一个单纯的现金产品（产生现金流）。这样代码可以认为总是在交易像现金一样的产品，而不管其基础资产的复杂性以及组成。

1. ETF Trick

    - 更好地对损益进行分解，查看是来自于价格变动还是调整仓位。同时能处理负数价格（因为价差可以为负数）。除此外还能解决组分部分时间不可交易和执行成本的问题。

    - 主要思想：假设模型、信号、交易均对应于这一个 ETF 。认为只能在两个时间点交易（无需考虑中间的休市等问题）。

    - 权重向量会随时间进行调整。可计算调仓成本、买卖价差以及对于 ETF  的交易量。
# 第二章-2 金融数据结构

 - 构造ETF
    - 首先根据资产的相关矩阵计算每个资产的配置权重，依据最小化方差的原则，用PCA方法实现。这个权重w针对的是投资额
    - 然后每个周期末，根据资产的最新价格，计算每个资产的份额h，包含交易费用，分红，折价等等。权重w也是每个周期更新一次，因为相关矩阵也是每周期更新一次
 - 采样方法sampling methods
    - 为什么要采样？两个原因：
        - 首先是调整样本量，不同的模型对样本量的要求不一样，特别当样本不平衡时，也需要调整正负样本量；
        - 其次，金融市场是一个极复杂的系统，没有一个模型可以刻画整个系统，所以必须挑选出一些相关的或者相似的样本作为训练数据。这个过程也是一个去除干扰样本的过程。
    - Event-based sampling. 背后的逻辑是，投资经理一般在观察到市场里发生一个事件之后下注。ML就是要自动化这个过程。具体是，首先去定义一个事件，然后设计方法去识别该事件，然后用ML算法去测试在事件发生前后是否存在一个潜在的能预测回报的函数。如果算法结果不理想，可以尝试用别的feature去刻画这个事件，或者重新定义一个事件。
 - CUMSUM Filter. 该方法可以找到价格突变的点。寻找的颗粒度由阈值h控制
